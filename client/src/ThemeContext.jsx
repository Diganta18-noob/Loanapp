import { createContext, useContext, useState, useEffect } from 'react';

const themes = {
    aurora: {
        name: 'Aurora',
        emoji: 'ðŸŒŒ',
        '--bg-primary': '#0f1729',
        '--bg-secondary': '#162033',
        '--bg-card': 'rgba(22, 32, 51, 0.85)',
        '--bg-card-hover': 'rgba(30, 45, 70, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(15, 23, 41, 0.95)',
        '--border-color': 'rgba(99, 102, 241, 0.15)',
        '--border-hover': 'rgba(99, 102, 241, 0.35)',
        '--text-primary': '#f1f5f9',
        '--text-secondary': '#94a3b8',
        '--text-muted': '#64748b',
        '--accent-primary': '#6366f1',
        '--accent-secondary': '#8b5cf6',
        '--accent-gradient': 'linear-gradient(135deg, #6366f1, #8b5cf6)',
        '--accent-glow': 'rgba(99, 102, 241, 0.35)',
        '--accent-user': '#10b981',
        '--accent-user-gradient': 'linear-gradient(135deg, #059669, #10b981)',
        '--accent-user-glow': 'rgba(16, 185, 129, 0.35)',
        '--success': '#34d399',
        '--warning': '#fbbf24',
        '--danger': '#f87171',
        '--glass': 'rgba(255,255,255,0.06)',
        '--glass-border': 'rgba(255,255,255,0.1)',
    },
    ocean: {
        name: 'Ocean Breeze',
        emoji: 'ðŸŒŠ',
        '--bg-primary': '#0c1b2a',
        '--bg-secondary': '#122740',
        '--bg-card': 'rgba(18, 39, 64, 0.85)',
        '--bg-card-hover': 'rgba(24, 52, 82, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(12, 27, 42, 0.95)',
        '--border-color': 'rgba(6, 182, 212, 0.15)',
        '--border-hover': 'rgba(6, 182, 212, 0.35)',
        '--text-primary': '#ecfeff',
        '--text-secondary': '#a5f3fc',
        '--text-muted': '#67e8f9',
        '--accent-primary': '#0891b2',
        '--accent-secondary': '#06b6d4',
        '--accent-gradient': 'linear-gradient(135deg, #0891b2, #22d3ee)',
        '--accent-glow': 'rgba(6, 182, 212, 0.35)',
        '--accent-user': '#14b8a6',
        '--accent-user-gradient': 'linear-gradient(135deg, #0d9488, #14b8a6)',
        '--accent-user-glow': 'rgba(20, 184, 166, 0.35)',
        '--success': '#2dd4bf',
        '--warning': '#fbbf24',
        '--danger': '#fb7185',
        '--glass': 'rgba(255,255,255,0.05)',
        '--glass-border': 'rgba(255,255,255,0.08)',
    },
    sunset: {
        name: 'Sunset Glow',
        emoji: 'ðŸŒ…',
        '--bg-primary': '#1a1018',
        '--bg-secondary': '#271a24',
        '--bg-card': 'rgba(39, 26, 36, 0.85)',
        '--bg-card-hover': 'rgba(52, 34, 48, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(26, 16, 24, 0.95)',
        '--border-color': 'rgba(244, 114, 182, 0.15)',
        '--border-hover': 'rgba(244, 114, 182, 0.35)',
        '--text-primary': '#fdf2f8',
        '--text-secondary': '#f9a8d4',
        '--text-muted': '#f472b6',
        '--accent-primary': '#ec4899',
        '--accent-secondary': '#f472b6',
        '--accent-gradient': 'linear-gradient(135deg, #db2777, #f472b6)',
        '--accent-glow': 'rgba(236, 72, 153, 0.35)',
        '--accent-user': '#f59e0b',
        '--accent-user-gradient': 'linear-gradient(135deg, #d97706, #f59e0b)',
        '--accent-user-glow': 'rgba(245, 158, 11, 0.35)',
        '--success': '#34d399',
        '--warning': '#fbbf24',
        '--danger': '#fb7185',
        '--glass': 'rgba(255,255,255,0.05)',
        '--glass-border': 'rgba(255,255,255,0.08)',
    },
    forest: {
        name: 'Forest',
        emoji: 'ðŸŒ¿',
        '--bg-primary': '#0a1a14',
        '--bg-secondary': '#0f261c',
        '--bg-card': 'rgba(15, 38, 28, 0.85)',
        '--bg-card-hover': 'rgba(20, 50, 38, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(10, 26, 20, 0.95)',
        '--border-color': 'rgba(16, 185, 129, 0.15)',
        '--border-hover': 'rgba(16, 185, 129, 0.35)',
        '--text-primary': '#ecfdf5',
        '--text-secondary': '#a7f3d0',
        '--text-muted': '#6ee7b7',
        '--accent-primary': '#059669',
        '--accent-secondary': '#10b981',
        '--accent-gradient': 'linear-gradient(135deg, #059669, #34d399)',
        '--accent-glow': 'rgba(16, 185, 129, 0.35)',
        '--accent-user': '#8b5cf6',
        '--accent-user-gradient': 'linear-gradient(135deg, #7c3aed, #8b5cf6)',
        '--accent-user-glow': 'rgba(139, 92, 246, 0.35)',
        '--success': '#34d399',
        '--warning': '#fbbf24',
        '--danger': '#f87171',
        '--glass': 'rgba(255,255,255,0.05)',
        '--glass-border': 'rgba(255,255,255,0.08)',
    },
    purpleHaze: {
        name: 'Purple Haze',
        emoji: 'ðŸ’Ž',
        '--bg-primary': '#120a24',
        '--bg-secondary': '#1a1038',
        '--bg-card': 'rgba(26, 16, 56, 0.85)',
        '--bg-card-hover': 'rgba(35, 22, 72, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(18, 10, 36, 0.95)',
        '--border-color': 'rgba(168, 85, 247, 0.18)',
        '--border-hover': 'rgba(168, 85, 247, 0.4)',
        '--text-primary': '#f3e8ff',
        '--text-secondary': '#d8b4fe',
        '--text-muted': '#c084fc',
        '--accent-primary': '#a855f7',
        '--accent-secondary': '#c084fc',
        '--accent-gradient': 'linear-gradient(135deg, #9333ea, #c084fc)',
        '--accent-glow': 'rgba(168, 85, 247, 0.35)',
        '--accent-user': '#e879f9',
        '--accent-user-gradient': 'linear-gradient(135deg, #d946ef, #e879f9)',
        '--accent-user-glow': 'rgba(217, 70, 239, 0.35)',
        '--success': '#34d399',
        '--warning': '#fbbf24',
        '--danger': '#fb7185',
        '--glass': 'rgba(168, 85, 247, 0.08)',
        '--glass-border': 'rgba(168, 85, 247, 0.12)',
    },
    blackPanther: {
        name: 'Black Panther',
        emoji: 'ðŸ¾',
        '--bg-primary': '#050505',
        '--bg-secondary': '#0d0d0d',
        '--bg-card': 'rgba(15, 15, 15, 0.9)',
        '--bg-card-hover': 'rgba(25, 25, 25, 0.95)',
        '--bg-input': 'rgba(255,255,255,0.05)',
        '--bg-nav': 'rgba(8, 8, 8, 0.98)',
        '--border-color': 'rgba(139, 92, 246, 0.12)',
        '--border-hover': 'rgba(139, 92, 246, 0.35)',
        '--text-primary': '#e4e4e7',
        '--text-secondary': '#a1a1aa',
        '--text-muted': '#71717a',
        '--accent-primary': '#7c3aed',
        '--accent-secondary': '#a78bfa',
        '--accent-gradient': 'linear-gradient(135deg, #5b21b6, #7c3aed)',
        '--accent-glow': 'rgba(124, 58, 237, 0.3)',
        '--accent-user': '#a78bfa',
        '--accent-user-gradient': 'linear-gradient(135deg, #7c3aed, #a78bfa)',
        '--accent-user-glow': 'rgba(167, 139, 250, 0.3)',
        '--success': '#4ade80',
        '--warning': '#facc15',
        '--danger': '#ef4444',
        '--glass': 'rgba(255,255,255,0.03)',
        '--glass-border': 'rgba(255,255,255,0.06)',
    },
    fire: {
        name: 'Fire Storm',
        emoji: 'ðŸ”¥',
        '--bg-primary': '#1a0a0a',
        '--bg-secondary': '#2a1010',
        '--bg-card': 'rgba(42, 16, 16, 0.85)',
        '--bg-card-hover': 'rgba(55, 20, 20, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(26, 10, 10, 0.95)',
        '--border-color': 'rgba(249, 115, 22, 0.15)',
        '--border-hover': 'rgba(249, 115, 22, 0.4)',
        '--text-primary': '#fff7ed',
        '--text-secondary': '#fed7aa',
        '--text-muted': '#fdba74',
        '--accent-primary': '#ea580c',
        '--accent-secondary': '#f97316',
        '--accent-gradient': 'linear-gradient(135deg, #dc2626, #f97316)',
        '--accent-glow': 'rgba(249, 115, 22, 0.35)',
        '--accent-user': '#fbbf24',
        '--accent-user-gradient': 'linear-gradient(135deg, #f59e0b, #fbbf24)',
        '--accent-user-glow': 'rgba(251, 191, 36, 0.35)',
        '--success': '#4ade80',
        '--warning': '#fbbf24',
        '--danger': '#ef4444',
        '--glass': 'rgba(249, 115, 22, 0.06)',
        '--glass-border': 'rgba(249, 115, 22, 0.1)',
    },
    arctic: {
        name: 'Arctic Ice',
        emoji: 'â„ï¸',
        '--bg-primary': '#0a1628',
        '--bg-secondary': '#0f1f3a',
        '--bg-card': 'rgba(15, 31, 58, 0.85)',
        '--bg-card-hover': 'rgba(20, 40, 75, 0.9)',
        '--bg-input': 'rgba(255,255,255,0.06)',
        '--bg-nav': 'rgba(10, 22, 40, 0.95)',
        '--border-color': 'rgba(56, 189, 248, 0.15)',
        '--border-hover': 'rgba(56, 189, 248, 0.35)',
        '--text-primary': '#f0f9ff',
        '--text-secondary': '#bae6fd',
        '--text-muted': '#7dd3fc',
        '--accent-primary': '#0ea5e9',
        '--accent-secondary': '#38bdf8',
        '--accent-gradient': 'linear-gradient(135deg, #0284c7, #38bdf8)',
        '--accent-glow': 'rgba(14, 165, 233, 0.35)',
        '--accent-user': '#2dd4bf',
        '--accent-user-gradient': 'linear-gradient(135deg, #14b8a6, #2dd4bf)',
        '--accent-user-glow': 'rgba(45, 212, 191, 0.35)',
        '--success': '#34d399',
        '--warning': '#fbbf24',
        '--danger': '#fb7185',
        '--glass': 'rgba(56, 189, 248, 0.06)',
        '--glass-border': 'rgba(56, 189, 248, 0.1)',
    },
    lavender: {
        name: 'Lavender Light',
        emoji: 'ðŸ’œ',
        '--bg-primary': '#f5f3ff',
        '--bg-secondary': '#ede9fe',
        '--bg-card': 'rgba(255, 255, 255, 0.85)',
        '--bg-card-hover': 'rgba(255, 255, 255, 0.95)',
        '--bg-input': 'rgba(0,0,0,0.04)',
        '--bg-nav': 'rgba(245, 243, 255, 0.95)',
        '--border-color': 'rgba(139, 92, 246, 0.2)',
        '--border-hover': 'rgba(139, 92, 246, 0.4)',
        '--text-primary': '#1e1b4b',
        '--text-secondary': '#4c1d95',
        '--text-muted': '#6d28d9',
        '--accent-primary': '#7c3aed',
        '--accent-secondary': '#8b5cf6',
        '--accent-gradient': 'linear-gradient(135deg, #7c3aed, #a78bfa)',
        '--accent-glow': 'rgba(124, 58, 237, 0.25)',
        '--accent-user': '#059669',
        '--accent-user-gradient': 'linear-gradient(135deg, #059669, #10b981)',
        '--accent-user-glow': 'rgba(5, 150, 105, 0.25)',
        '--success': '#059669',
        '--warning': '#d97706',
        '--danger': '#dc2626',
        '--glass': 'rgba(139, 92, 246, 0.06)',
        '--glass-border': 'rgba(139, 92, 246, 0.15)',
    },
    ivory: {
        name: 'Ivory Cream',
        emoji: 'â˜€ï¸',
        '--bg-primary': '#fefce8',
        '--bg-secondary': '#fef9c3',
        '--bg-card': 'rgba(255, 255, 255, 0.9)',
        '--bg-card-hover': 'rgba(255, 255, 255, 1)',
        '--bg-input': 'rgba(0,0,0,0.04)',
        '--bg-nav': 'rgba(254, 252, 232, 0.95)',
        '--border-color': 'rgba(217, 119, 6, 0.15)',
        '--border-hover': 'rgba(217, 119, 6, 0.35)',
        '--text-primary': '#422006',
        '--text-secondary': '#713f12',
        '--text-muted': '#a16207',
        '--accent-primary': '#d97706',
        '--accent-secondary': '#f59e0b',
        '--accent-gradient': 'linear-gradient(135deg, #d97706, #fbbf24)',
        '--accent-glow': 'rgba(217, 119, 6, 0.25)',
        '--accent-user': '#0d9488',
        '--accent-user-gradient': 'linear-gradient(135deg, #0d9488, #14b8a6)',
        '--accent-user-glow': 'rgba(13, 148, 136, 0.25)',
        '--success': '#059669',
        '--warning': '#b45309',
        '--danger': '#dc2626',
        '--glass': 'rgba(217, 119, 6, 0.06)',
        '--glass-border': 'rgba(217, 119, 6, 0.12)',
    },
};

const ThemeContext = createContext();

export function ThemeProvider({ children }) {
    const [currentTheme, setCurrentTheme] = useState(() => {
        return localStorage.getItem('vlh-theme') || 'aurora';
    });

    useEffect(() => {
        const theme = themes[currentTheme];
        const root = document.documentElement;
        Object.entries(theme).forEach(([key, value]) => {
            if (key.startsWith('--')) {
                root.style.setProperty(key, value);
            }
        });
        localStorage.setItem('vlh-theme', currentTheme);

        const isLight = currentTheme === 'lavender' || currentTheme === 'ivory';
        root.setAttribute('data-theme-mode', isLight ? 'light' : 'dark');
    }, [currentTheme]);

    const cycleTheme = () => {
        const keys = Object.keys(themes);
        const idx = keys.indexOf(currentTheme);
        setCurrentTheme(keys[(idx + 1) % keys.length]);
    };

    return (
        <ThemeContext.Provider value={{ currentTheme, setCurrentTheme, cycleTheme, themes, themeList: Object.keys(themes) }}>
            {children}
        </ThemeContext.Provider>
    );
}

export function useTheme() {
    return useContext(ThemeContext);
}

export default themes;
